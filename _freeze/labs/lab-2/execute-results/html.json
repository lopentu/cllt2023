{
  "hash": "484010e6d87803e2910d135f10fcb34b",
  "result": {
    "markdown": "---\ntitle: \"Lab 2 - College scorecard\"\neditor: visual\nreference-location: margin\n---\n\n## Introduction\n\nIn today's lab, you'll use simple linear regression to analyze the relationship between the admissions rate and total cost for colleges and universities in the United States.\n\n### Learning goals\n\nBy the end of the lab you will...\n\n-   Be able to fit a simple linear regression model using R.\n-   Be able to interpret the slope and intercept for the model.\n-   Be able to use statistical inference to draw conclusions about the slope.\n-   Continue developing a workflow for reproducible data analysis.\n\n## Getting started\n\n-   Go to the [sta210-s22](https://www.github.com/sta210-s22) organization on GitHub.\n    Click on the repo with the prefix **lab-2**.\n    It contains the starter documents you need to complete the lab.\n\n-   Clone the repo and start a new project in RStudio.\n    See the [Lab 1 instructions](labs/lab-1.html) for details on cloning a repo, starting a new R project and configuring git.\n\n## Packages\n\nWe will use the following package in today's lab.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)  # for data wrangling + visualization\nlibrary(tidymodels) # for modeling\nlibrary(knitr)      # for pretty printing of tables\n```\n:::\n\n## Data: College scorecard\n\nThe data for this lab is from the `scorecard` data set in the **rcfss** R package.\nIt includes information originally obtained from the [U.S. Department of Education's College Scorecard](https://collegescorecard.ed.gov/data/) for 1753 colleges and universities during the 2018 - 2019 academic year.\n\nThe lab focuses on the following variables:\n\n-   `admrate`: Undergraduate admissions rate (from 0-100%)\n\n-   `cost`: The average annual total cost of attendance, including tuition and fees, books and supplies, and living expenses\n\n-   `type`: Type of college (Public; Private, nonprofit; Private, for-profit)\n\n[Click here](https://uc-cfss.github.io/rcfss/reference/scorecard.html) to see a full list of variables and definitions.\n\nUse the code below to load the data set.\n\n::: {.cell}\n\n```{.r .cell-code}\nscorecard <- read_csv(\"data/scorecard.csv\")\n```\n:::\n\n## Exercises\n\n::: callout-note\nInclude axis labels and an informative title for all plots.\nUse the `kable()` function to neatly print tables and regression output.\n:::\n\n### Exercise 1\n\nCreate a histogram to examine the distribution of `admrate` and calculate summary statistics for the center (mean and median) and the spread (standard deviation and IQR).\n\n### Exercise 2\n\nUse the results from the previous exercise to describe the distribution of `admrate`.\nInclude the shape, center, spread, and if there are potential outliers.\n\n### Exercise 3\n\nPlot the distribution of `cost` and calculate the appropriate summary statistics.\nDescribe the distribution of `cost` (shape, center, and spread, and outliers) using the plot and appropriate summary statistics.\n\n::: render-commit-push\nThis is a good place to render, commit, and push changes to your remote lab repo on GitHub.\nClick the checkbox next to each file in the Git pane to stage the updates you've made, write an informative commit message, and push.\nAfter you push the changes, the Git pane in RStudio should be empty.\n:::\n\n### Exercise 4\n\nThe goal of this analysis is to fit a regression model that can be used to understand the variability in the cost of college based on the admission rate.\nBefore fitting the model, let's look at the relationship between the two variables.\nCreate a scatterplot to display the relationship between cost and admissions rate.\nDescribe the relationship between the two variables based on the plot.\n\n### Exercise 5\n\nDoes the relationship between cost and admissions rate differ by type of college?\nModify the plot from the previous exercise visualize the relationship by type of college.\n\n### Exercise 6\n\nDescribe two new observations from the scatterplot in Exercise 5 that you didn't see in the scatterplot from Exercise 4.\n\n::: render-commit-push\nThis is a good place to render, commit, and push changes to your remote lab repo on GitHub.\nClick the checkbox next to each file in the Git pane to stage the updates you've made, write an informative commit message, and push.\nAfter you push the changes, the Git pane in RStudio should be empty.\n:::\n\n### Exercise 7\n\nFit the linear regression model.\nUse the `kable` function to neatly display the results with a reasonable number of decimals.\n\n### Exercise 8\n\nConsider the model from the previous exercise.\n\n-   Interpret the slope in the context of the problem.\n-   Does the intercept have a meaningful interpretation? If so, write the interpretation in the context of the problem. Otherwise, explain why the interpretation is not meaningful.\n\n### Exercise 9\n\nConstruct a 95% confidence interval for the slope using bootstrapping.\nFollow these steps to accomplish this:\n\n-   First set a seed for simulating reproducibly.\n-   Then, simulate the bootstrap distribution of the slope using 1,000 bootstrap samples.\n-   Then, visually estimate the bounds of the bootstrap interval based on a histogram of the distribution of the bootstrapped slopes, using the percentile method.\n-   And then, use the `get_confidence_interval()` function to explicitly calculate the bounds of the confidence interval using the percentile method.\n-   Finally, interpret the confidence interval in the context of the data.\n\n::: render-commit-push\nThis is a good place to render, commit, and push changes to your remote lab repo on GitHub.\nClick the checkbox next to each file in the Git pane to stage the updates you've made, write an informative commit message, and push.\nAfter you push the changes, the Git pane in RStudio should be empty.\n:::\n\n### Exercise 10\n\nFinally, we want to answer the question \"Do the data provide sufficient evidence of a linear relationship between cost and admissions rate, i.e. $\\beta_1$ is different from 0?\"\n\nTo answer this question we will use a hypothesis test.\nWe can conduct a hypothesis test via simulation (what we'll do in this lab) or using mathematical models (what we'll do in the next class).\n\nBefore we can conduct the hypothesis test, let's first set our hypotheses.\nRemember that the null hypothesis represents the status quo (nothing going on, i.e. there is no relationship) and the alternative hypothesis represents our research question (there is something going on, i.e. there is a relationship).\n\n-   $H_0$: There is no linear relationship between the admissions rate and cost of colleges in the United States, $\\beta_1 = 0$\n-   $H_A$: There is a linear relationship between the admissions rate and cost of colleges in the United States, $\\beta_1 \\ne 0$\n\nTo test these hypotheses, we will use a permutation test, where we\n\n-   Simulate new samples from the original sample via permutation under the assumption that the null hypothesis is true\n-   Fit models to each of the samples and estimate the slope\n-   Use features of the distribution of the permuted slopes to calculate the p-value for the hypothesis test\n\nThe major difference between constructing a confidence interval and conducting a hypothesis test is that for the hypothesis test we assume that the null hypothesis is true.\nThis requires a simulation scheme that will allow us to measure the natural variability in the data due to sampling but **not** due to cost and admission rate being correlated by permuting permute one variable to eliminate any existing relationship between the variables.\nTo do so, we randomly assign each `admrate` value to `cost` of a given university, i.e. `cost` and `admrate` are no longer matched for a given university.\n\nIn the following code chunk we\n\n-   First set a seed for simulating reproducibly.\n-   Then, we start with our data frame and specify our model as `cost` vs. `admrate`.\n-   Then, we set our null hypothesis (`cost` and `admrate` are independent)\n-   And then we generate 1000 replicates of our data where, for each replicate, we permute values of `admrate` to randomly assign them to values of `cost`\n-   Finally, we fit our model to each of our 1000 permuted datasets\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\n\nperm_fits <- scorecard %>%\n  specify(cost ~ admrate) %>%\n  hypothesize(null = \"independence\") %>%\n  generate(reps = 1000, type = \"permute\") %>%\n  fit()\n```\n:::\n\nThe resulting dataset `perm_fits` has `nrow(perm_fits)` and `ncol(perm_fits)` columns.\nThe first column, `replicate` indicates the replicate number of the dataset the models were fit to; the values in this column range between 1 and 1000.\nThe second column, `term`, tells us which term (intercept of the model or slope of `admrate`) the `estimate` value in the third column is for.\n\n::: {.cell}\n\n```{.r .cell-code}\nperm_fits\n```\n\n::: {.cell-output-stdout}\n```\n# A tibble: 2,000 × 3\n# Groups:   replicate [1,000]\n   replicate term      estimate\n       <int> <chr>        <dbl>\n 1         1 intercept  36857. \n 2         1 admrate     -781. \n 3         2 intercept  35901. \n 4         2 admrate      643. \n 5         3 intercept  36608. \n 6         3 admrate     -411. \n 7         4 intercept  35831. \n 8         4 admrate      746. \n 9         5 intercept  36367. \n10         5 admrate      -51.7\n# … with 1,990 more rows\n```\n:::\n:::\n\n-   Create a histogram of the slope estimates in `perm_fits`. (Hint: Filter the dataset for just the slope values, `term == \"admrate\".`)\n-   Estimate the p-value of the hypothesis test based on this distribution.\n-   State your conclusion for the test in context.\n-   Indicate whether or not it is consistent with the results of the hypothesis test from the previous exercise. Briefly explain your response.\n\n::: render-commit-push\nThis is a good place to render, commit, and push changes to your remote lab repo on GitHub.\nClick the checkbox next to each file in the Git pane to stage the updates you've made, write an informative commit message, and push.\nAfter you push the changes, the Git pane in RStudio should be empty.\n:::\n\n## Submission\n\n::: callout-warning\nBefore you wrap up the assignment, make sure all documents are updated on your GitHub repo.\nWe will be checking these to make sure you have been practicing how to commit and push changes.\n\nRemember -- you must turn in a PDF file to the Gradescope page before the submission deadline for full credit.\n:::\n\nTo submit your assignment:\n\n-   Go to [http://www.gradescope.com](http://www.gradescope.com/) and click *Log in* in the top right corner.\n-   Click *School Credentials* ➡️ *Duke NetID* and log in using your NetID credentials.\n-   Click on your *STA 210* course.\n-   Click on the assignment, and you'll be prompted to submit it.\n-   Mark the pages associated with each exercise. All of the pages of your lab should be associated with at least one question (i.e., should be \"checked\").\n-   Select the first page of your PDF submission to be associated with the *\"Workflow & formatting\"* section.\n\n## Grading\n\nTotal points available: 50 points.\n\n| Component             | Points |\n|-----------------------|--------|\n| Ex 1 - 10             | 45     |\n| Workflow & formatting | 5[^1]  |\n\n[^1]: The \"Workflow & formatting\" grade is to assess the reproducible workflow.\n    This includes having at least 3 informative commit messages and updating the name and date in the YAML.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": [],
    "engineDependencies": {},
    "preserve": {},
    "postProcess": null
  }
}