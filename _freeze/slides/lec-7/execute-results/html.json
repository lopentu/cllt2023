{
  "hash": "1aecfead3ae303601906bb2370b9c3d0",
  "result": {
    "markdown": "---\ntitle: \"SLR: Model diagnostics\"\nsubtitle: \"STA 210 - Spring 2022\"\nauthor: \"Dr. Mine Ã‡etinkaya-Rundel\"\nfooter: \"[sta210-s22.github.io/website](https://sta210-s22.github.io/website/)\"\nlogo: \"images/logo.png\"\nformat: \n  revealjs:\n    theme: slides.scss\n    multiplex: true\n    transition: fade\n    slide-number: true\n    incremental: true \n    chalkboard: true\neditor: visual\nexecute:\n  freeze: auto\n---\n\n\n\n# Welcome\n\n## Computational setup\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse)   # for data wrangling and visualization\nlibrary(tidymodels)  # for modeling\nlibrary(openintro)   # for the duke_forest dataset\nlibrary(scales)      # for pretty axis labels\nlibrary(knitr)       # for pretty tables\nlibrary(kableExtra)  # also for pretty tables\nlibrary(patchwork)   # arrange plots\n\n# set default theme and larger font size for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 20))\n```\n:::\n\n# Mathematical models for inference\n\n## The regression model, revisited\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_fit <- linear_reg() %>%\n  set_engine(\"lm\") %>%\n  fit(price ~ area, data = duke_forest)\n\ntidy(df_fit) %>%\n  kable(digits = 2)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 116652.33 </td>\n   <td style=\"text-align:right;\"> 53302.46 </td>\n   <td style=\"text-align:right;\"> 2.19 </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> area </td>\n   <td style=\"text-align:right;\"> 159.48 </td>\n   <td style=\"text-align:right;\"> 18.17 </td>\n   <td style=\"text-align:right;\"> 8.78 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n## HT for the slope {.smaller}\n\n**Hypotheses:** $H_0: \\beta_1 = 0$ vs. $H_A: \\beta_1 \\ne 0$\n\n. . .\n\n**Test statistic:** Number of standard errors the estimate is away from the null\n\n$$\nT = \\frac{\\text{Estimate - Null}}{\\text{Standard error}} \\\\\n$$\n\n. . .\n\n**p-value:** Probability of observing a test statistic at least as extreme (in the direction of the alternative hypothesis) from the null value as the one observed\n\n$$\np-value = P(|t| > |\\text{test statistic}),\n$$\n\ncalculated from a $t$ distribution with $n - 2$ degrees of freedom\n\n## HT: Test statistic\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 116652.33 </td>\n   <td style=\"text-align:right;\"> 53302.46 </td>\n   <td style=\"text-align:right;\"> 2.19 </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #D9E3E4 !important;\"> area </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 159.48 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 18.17 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 8.78 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 0.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n$$\nt = \\frac{\\hat{\\beta}_1 - 0}{SE_{\\hat{\\beta}_1}} = \\frac{159.48 - 0}{18.17} = 8.78\n$$\n\n## HT: p-value\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 116652.33 </td>\n   <td style=\"text-align:right;\"> 53302.46 </td>\n   <td style=\"text-align:right;\"> 2.19 </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #D9E3E4 !important;\"> area </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 159.48 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 18.17 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 8.78 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 0.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-4-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Understanding the p-value {.smaller}\n\n| Magnitude of p-value    | Interpretation                        |\n|:------------------------|:--------------------------------------|\n| p-value \\< 0.01         | strong evidence against $H_0$         |\n| 0.01 \\< p-value \\< 0.05 | moderate evidence against $H_0$       |\n| 0.05 \\< p-value \\< 0.1  | weak evidence against $H_0$           |\n| p-value \\> 0.1          | effectively no evidence against $H_0$ |\n\n::: callout-important\nThese are general guidelines.\nThe strength of evidence depends on the context of the problem.\n:::\n\n## HT: Conclusion, in context\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 116652.33 </td>\n   <td style=\"text-align:right;\"> 53302.46 </td>\n   <td style=\"text-align:right;\"> 2.19 </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #D9E3E4 !important;\"> area </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 159.48 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 18.17 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 8.78 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 0.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n-   The data provide convincing evidence that the population slope $\\beta_1$ is different from 0.\n-   The data provide convincing evidence of a linear relationship between area and price of houses in Duke Forest.\n\n## CI for the slope\n\n$$\n\\text{Estimate} \\pm \\text{ (critical value) } \\times \\text{SE}\n$$\n\n. . .\n\n$$\n\\hat{\\beta}_1 \\pm t^* \\times SE_{\\hat{\\beta}_1}\n$$\n\nwhere $t^*$ is calculated from a $t$ distribution with $n-2$ degrees of freedom\n\n## CI: Critical value\n\n::: columns\n::: {.column width=\"60%\"}\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# confidence level: 95%\nqt(0.975, df = nrow(duke_forest) - 2)\n```\n\n::: {.cell-output-stdout}\n```\n[1] 1.984984\n```\n:::\n\n```{.r .cell-code}\n# confidence level: 90%\nqt(0.95, df = nrow(duke_forest) - 2)\n```\n\n::: {.cell-output-stdout}\n```\n[1] 1.660881\n```\n:::\n\n```{.r .cell-code}\n# confidence level: 99%\nqt(0.995, df = nrow(duke_forest) - 2)\n```\n\n::: {.cell-output-stdout}\n```\n[1] 2.628016\n```\n:::\n:::\n:::\n\n::: {.column width=\"40%\"}\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=100%}\n:::\n:::\n:::\n:::\n\n## 95% CI for the slope: Calculation\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 116652.33 </td>\n   <td style=\"text-align:right;\"> 53302.46 </td>\n   <td style=\"text-align:right;\"> 2.19 </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #D9E3E4 !important;\"> area </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 159.48 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 18.17 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 8.78 </td>\n   <td style=\"text-align:right;background-color: #D9E3E4 !important;\"> 0.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n$$\\hat{\\beta}_1 = 159.48 \\hspace{15mm} t^* = 1.98 \\hspace{15mm} SE_{\\hat{\\beta}_1} = 18.17$$\n\n. . .\n\n$$\n159.48 \\pm 1.98 \\times 18.17 = (123.50, 195.46)\n$$\n\n## 95% CI for the slope: Computation {.smaller}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntidy(df_fit, conf.int = TRUE, conf.level = 0.95) %>% \n  kable(digits = 2)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n   <th style=\"text-align:right;\"> conf.low </th>\n   <th style=\"text-align:right;\"> conf.high </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 116652.33 </td>\n   <td style=\"text-align:right;\"> 53302.46 </td>\n   <td style=\"text-align:right;\"> 2.19 </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n   <td style=\"text-align:right;\"> 10847.77 </td>\n   <td style=\"text-align:right;\"> 222456.88 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> area </td>\n   <td style=\"text-align:right;\"> 159.48 </td>\n   <td style=\"text-align:right;\"> 18.17 </td>\n   <td style=\"text-align:right;\"> 8.78 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 123.41 </td>\n   <td style=\"text-align:right;\"> 195.55 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n## Confidence interval for predictions {.smaller}\n\n-   Suppose we want to answer the question *\"What is the predicted sale price of a Duke Forest house that is 2,800 square feet?\"*\n-   We said reporting a single estimate for the slope is not wise, and we should report a plausible range instead\n-   Similarly, reporting a single prediction for a new value is not wise, and we should report a plausible range instead\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Two types of predictions {.smaller}\n\n1.  Prediction for the mean: \"\"What is the average predicted sale price of Duke Forest houses that are 2,800 square feet?\"\n\n2.  Prediction for an individual observation: \"What is the predicted sale price of a Duke Forest house that is 2,800 square feet?\"\n\n. . .\n\n::: question\nWhich would you expect to be more variable?\nThe average prediction or the prediction for an individual observation?\nBased on your answer, how would you expect the widths of plausible ranges for these two predictions to compare?\n:::\n\n## Uncertainty in predictions\n\n**Confidence interval for the mean outcome:** $$\\hat{y} \\pm t_{n-2}^* \\times \\color{purple}{\\mathbf{SE}_{\\hat{\\boldsymbol{\\mu}}}}$$\n\n. . .\n\n**Prediction interval for an individual observation:** $$\\hat{y} \\pm t_{n-2}^* \\times \\color{purple}{\\mathbf{SE_{\\hat{y}}}}$$\n\n## Standard errors {.smaller}\n\n**Standard error of the mean outcome:** $$SE_{\\hat{\\mu}} = \\hat{\\sigma}_\\epsilon\\sqrt{\\frac{1}{n} + \\frac{(x-\\bar{x})^2}{\\sum\\limits_{i=1}^n(x_i - \\bar{x})^2}}$$\n\n. . .\n\n**Standard error of an individual outcome:** $$SE_{\\hat{y}} = \\hat{\\sigma}_\\epsilon\\sqrt{1 + \\frac{1}{n} + \\frac{(x-\\bar{x})^2}{\\sum\\limits_{i=1}^n(x_i - \\bar{x})^2}}$$\n\n## Standard errors {.smaller}\n\n**Standard error of the mean outcome:** $$SE_{\\hat{\\mu}} = \\hat{\\sigma}_\\epsilon\\sqrt{\\frac{1}{n} + \\frac{(x-\\bar{x})^2}{\\sum\\limits_{i=1}^n(x_i - \\bar{x})^2}}$$\n\n**Standard error of an individual outcome:** $$SE_{\\hat{y}} = \\hat{\\sigma}_\\epsilon\\sqrt{\\mathbf{\\color{purple}{\\Large{1}}} + \\frac{1}{n} + \\frac{(x-\\bar{x})^2}{\\sum\\limits_{i=1}^n(x_i - \\bar{x})^2}}$$\n\n## Confidence interval\n\nThe 95% **confidence interval** for the *mean* outcpme:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnew_house <- tibble(area = 2800)\n\npredict(df_fit, new_data = new_house, type = \"conf_int\", level = 0.95)\n```\n\n::: {.cell-output-stdout}\n```\n# A tibble: 1 Ã— 2\n  .pred_lower .pred_upper\n        <dbl>       <dbl>\n1     529351.     597060.\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n. . .\n\nWe are 95% confident that mean sale price of Duke Forest houses that are 2,800 square feet is between $529,351 and $597,060.\n\n## Prediction interval\n\nThe 95% **prediction interval**for the *individual* outcome:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npredict(df_fit, new_data = new_house, type = \"pred_int\", level = 0.95)\n```\n\n::: {.cell-output-stdout}\n```\n# A tibble: 1 Ã— 2\n  .pred_lower .pred_upper\n        <dbl>       <dbl>\n1     226438.     899973.\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n. . .\n\nWe are 95% confident that predicted sale price of a Duke Forest house that is 2,800 square feet is between $226,438 and $899,973.\n\n## Comparing intervals\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-15-1.png){fig-align='center' width=100%}\n:::\n:::\n\n## Extrapolation\n\n::: columns\n::: {.column width=\"45%\"}\n::: question\nCalculate the prediction interval for the sale price of a \"tiny house\" in Duke Forest that is 225 square feet.\n:::\n:::\n\n::: {.column width=\"55%\"}\n![](images/lec-7/tiny-house.jpeg){fig-alt=\"Black tiny house on wheels\" fig-align=\"center\" width=\"750\"}\n:::\n:::\n\n. . .\n\n*No, thanks!*\n\n# Model conditions\n\n## Model conditions\n\n1.  **Linearity:** There is a linear relationship between the outcome and predictor variables\n2.  **Constant variance:** The variability of the errors is equal for all values of the predictor variable, i.e. the errors are homeoscedastic\n3.  **Normality:** The errors follow a normal distribution\n4.  **Independence:** The errors are independent from each other\n\n## Linearity\n\nâœ… The residuals vs. fitted values plot should not show a random scatter of residuals (no distinguishable pattern or structure)\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/res-vs-fit-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Residuals vs. fitted values\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_aug <- augment(df_fit$fit)\n\nggplot(df_aug, aes(x = .fitted, y = .resid)) +\n  geom_point() +\n  geom_hline(yintercept = 0, linetype = \"dashed\") +\n  ylim(-1000000, 1000000) +\n  labs(\n    x = \"Fitted value\", y = \"Residual\",\n    title = \"Residuals vs. fitted values\"\n  )\n```\n:::\n\n## Application exercise\n\n::: appex\nðŸ“‹ [github.com/sta210-s22/ae-3-duke-forest](https://github.com/sta210-s22/?q=ae-3-duke-forest&type=all&language=&sort=)\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_61f6a5e7\" style=\"right:0;bottom:0;font-size:2em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n## Non-linear relationships\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n::: columns\n::: {.column width=\"50%\"}\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-19-1.png){fig-align='center' width=100%}\n:::\n:::\n:::\n\n::: {.column width=\"50%\"}\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-20-1.png){fig-align='center' width=100%}\n:::\n:::\n:::\n:::\n\n## Constant variance\n\nâœ… The vertical spread of the residuals should be relatively constant across the plot\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-21-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Non-constant variance\n\n::: columns\n::: {.column width=\"50%\"}\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-22-1.png){fig-align='center' width=100%}\n:::\n:::\n:::\n\n::: {.column width=\"50%\"}\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-23-1.png){fig-align='center' width=100%}\n:::\n:::\n:::\n:::\n\n## Normality\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-7_files/figure-revealjs/unnamed-chunk-24-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Independence\n\n-   We can often check the independence assumption based on the context of the data and how the observations were collected\n\n-   If the data were collected in a particular order, examine a scatterplot of the residuals versus order in which the data were collected\n\n. . .\n\nâœ… If this is a random sample of Duke Houses, the error for one house does not tell us anything about the error for another use\n\n## Recap\n\nUsed residual plots to check conditions for SLR:\n\n::: columns\n::: {.column width=\"50%\"}\n::: nonincremental\n-   Linearity\n-   Constant variance\n:::\n:::\n\n::: {.column width=\"50%\"}\n::: nonincremental\n-   Normality\n-   Independence\n:::\n:::\n:::\n\n. . .\n\n::: question\nWhich of these conditions are required for fitting a SLR?\nWhich for simulation-based inference for the slope for an SLR?\nWhich for inference with mathematical models?\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_61f6a398\" style=\"right:0;bottom:0;font-size:2em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">03</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::",
    "supporting": [
      "lec-7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/countdown-0.3.5/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.3.5/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    function fireSlideChanged(previousSlide, currentSlide) {\n\n      // dispatch for htmlwidgets\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for reveal\n    if (window.Reveal) {\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\n        fireSlideChanged(event.previousSlide, event.currentSlide);\n      });\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": null
  }
}